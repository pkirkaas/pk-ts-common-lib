(function(o){typeof define=="function"&&define.amd?define(o):o()})(function(){"use strict";const o=e=>typeof e=="object"&&e!=null&&!(e instanceof Boolean)&&!(e instanceof Date)&&!(e instanceof Number)&&!(e instanceof RegExp)&&!(e instanceof String),h=e=>"#"+e.map(t=>String(t).replace(/~/g,"~0").replace(/\//g,"~1")).join("/"),g=()=>{const e=new exports.WeakMap;return function(n,s){if(n!=="$ref"&&o(s)){if(e.has(s))return{$ref:h(e.get(s))};e.set(s,[...e.get(this)??[],n])}return s}};function d(){const e=new exports.WeakMap,t=new exports.WeakMap,n=new exports.Set;function s(i){const c=i.$ref.slice(1).split("/");let r,f,p=this;for(var a=0;a<c.length;a++)r=c[a].replace(/~1/g,"/").replace(/~0/g,"~"),p=p[r];f=e.get(i),f[t.get(i)]=p}return function(c,r){if(c==="$ref")n.add(this);else if(o(r)){var f=c===""&&Object.keys(this).length===1;f?n.forEach(s,this):(e.set(r,this),t.set(r,c))}return r}}const l=e=>Object.defineProperties(e,{decycle:{value:(t,n)=>e.stringify(t,g(),n)},retrocycle:{value:t=>e.parse(t,d())}});Object.assign(exports,{decycle:g,retrocycle:d,extend:l})});
